---
title: 'RSS å¯¾å¿œã—ãŸ'
description: 'ãƒ–ãƒ­ã‚°ã‚’ RSS 2.0 ã«å¯¾å¿œã•ã›ãŸ'
date: '2020-10-14T00:00:00+09:00'
---

# RSS 2.0 å¯¾å¿œ

ãƒ–ãƒ­ã‚°ã§ã¯å¿…è¦ãªæ©Ÿèƒ½ã§ã‚ã‚‹ã€RSS ã®å¯¾å¿œã‚’ã—ãŸã€‚ï¼ˆRSSãƒªãƒ¼ãƒ€ãƒ¼ãªã©ã§ã„ã‚ã‚“ãªè¨˜äº‹ã‚’è³¼èª­ã—ã¦ã„ã‚‹äººã‚‚ã¾ã ã¾ã å¤šã„ãƒã‚ºã€‚ï¼‰

## XML ç”Ÿæˆ

RSS ãƒ•ã‚£ãƒ¼ãƒ‰ã«å¿…è¦ãª XML ã‚’ metaãƒ‡ãƒ¼ã‚¿ãªã©ã‹ã‚‰ç”Ÿæˆã™ã‚‹ã ã‘ï¼Ÿã§å¤§ä¸ˆå¤«ã€‚
`lastBuildDate` ã«æœ€æ–°ã®è¨˜äº‹ã®æ—¥ä»˜ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ãŒå¤§äº‹ã€‚
[ä»•æ§˜](https://validator.w3.org/feed/docs/rss2.html#hrelementsOfLtitemgt) ã¯ã“ã“ã€‚

```ts
// lib/rss.ts

import { Article } from '../interfaces';

const generateRssItem = (article: Article): string => `
  <item>
    <guid>https://7kaji.page/articles/${article.slug}</guid>
    <title>${article.meta.title}</title>
    <link>https://7kaji.page/articles/${article.slug}</link>
    <description>${article.meta.description}</description>
    <pubDate>${new Date(article.meta.date).toString()}</pubDate>
  </item>
`;

const generateRss = (articles: Article[]): string => `
  <rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
      <title>7kaji.page | è¨˜äº‹ä¸€è¦§</title>
      <link>https://7kaji.page/articles</link>
      <description>ã„ã‚ã„ã‚æ›¸ã„ã¦ã„ãã¾ã™ã€‚</description>
      <language>ja</language>
      <lastBuildDate>${new Date(articles[0].meta.date).toString()}</lastBuildDate>
      <atom:link href="https://7kaji.page/rss.xml" rel="self" type="application/rss+xml"/>
      ${articles.map(generateRssItem).join('')}
    </channel>
  </rss>
`;

export default generateRss;
```

è¨˜äº‹ä¸€è¦§ãƒšãƒ¼ã‚¸ã® `getStaticProps` ã§ã“ã®å‡¦ç†ã‚’è¡Œã†ã®ã§ã€build æ™‚ã«é™çš„ãªãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ xml ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚ä¾¿åˆ©ã€‚

```ts
// pages/articles/index.tsx

import fs from 'fs';
import generateRss from '../../lib/rss';
import { getAllDocs } from '../../lib/doc';
import { ArticlesProps } from '../../interfaces';
import Layout from '../../components/Layout';
import Articles from '../../components/Articles';

export default function Docs(props: ArticlesProps) {
  const meta = {
    title: "è¨˜äº‹ä¸€è¦§",
    description: 'è¨˜äº‹ä¸€è¦§ã§ã™ã€‚'
  }
  return (
    <Layout meta={meta}>
      <h1>è¨˜äº‹ä¸€è¦§</h1>
      <Articles articles={props.articles} />
    </Layout>
  );
}

export async function getStaticProps() {
  const docs = getAllDocs().reverse();

  // RSS å¯¾å¿œã—ãŸã®ã¯ğŸ‘‡ã ã‘
  const rss = generateRss(docs);
  fs.writeFileSync('./public/rss.xml', rss);

  const articles = docs.map(doc => {
    return { slug: doc.slug, title: doc.meta.title }
  });
  return {
    props: {
      articles,
    }
  };
}
```

`pages/_document.tsx` ã«å¿…è¦ãªãƒ˜ãƒƒãƒ€ãƒ¼ã‚’è¨­å®šã™ã‚‹ã“ã¨ã‚‚å¿˜ã‚Œãšã«

```ts
// pages/_document.tsx

      <Html lang="ja">
        <Head>
          <link
            rel="alternate"
            type="application/rss+xml"
            title="RSS feed for blog posts"
            href="https://7kaji.page/rss.xml"
          />
        </Head>
```




## ã¡ãª

è‡ªåˆ†ã¯ Mac ã®ã‚¢ãƒ—ãƒªã® [Reeder](https://apps.apple.com/jp/app/reeder-4/id1449412482?mt=12) ã¨ã„ã†ã‚‚ã®ã‚’ä½¿ã£ã¦ã‚‹ã‚“ã ã‘ã©ã€å…¬å¼ã®ã‚µã‚¤ãƒˆã‚’ã¿ãŸã‚‰ [æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³](https://reederapp.com/) ãŒã‚‚ã†ã™ãå‡ºãã†ãªæ°—é…ãŒã—ã¦ãŸã€‚

